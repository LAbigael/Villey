---
import Layout from "../../layouts/Layout.astro";
import Volume from "../../components/Volume.astro";

import { getDirectusClient } from "../../utils/get-directus-client";
import { readItems } from "@directus/sdk";


export async function getStaticPaths() {
  const directus = await getDirectusClient();
  const articles = await directus.request(
    readItems("Volumes", {
      fields: ["slug", "title", "number", "published_at"],
      sort: ["-id"],
      filter: {
        site_id: {
          _eq: "1",
        },
      },
    }),
  );
  return articles.map((article) => ({
    params: { slug: article.slug },
    props: { volume: { ...volume } },
  }));
}
const { volume } = Astro.props;
---

<Layout title="Droit & Philosophie.">
  <main class="font-light">
    <Volume volume={volume} />

    <style>
      main {
        margin: auto;
      }
    </style>
  </main>
</Layout>
