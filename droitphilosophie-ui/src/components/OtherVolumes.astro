---
import BookIcon from "./icons/book.astro";
const { volume } = Astro.props;

import { getDirectusClient } from "../utils/get-directus-client.js";
import { readItems } from "@directus/sdk";

const directus = await getDirectusClient();
let volumes = await directus.request(
  readItems("Volumes", {
    fields: ["slug", "title", "number", "published_at"],
    sort: ["-id"],
    filter: {
      site_id: {
        _eq: "1",
      },
    },
  }),
);
volume && volumes && (volumes = volumes.filter((v) => v.slug !== volume.slug));
---

<div class="m-4">
  <div class="other_volume">Autres Num√©ros</div>
  {
    volumes &&
      volumes.map((volume) => (
        <div class="flex flex-row">
          <BookIcon />
          <h2>
            <a href={`/volumes/${volume.slug}`}>{volume.title}</a>
          </h2>
        </div>
      ))
  }
</div>

<style>
  .other_volume {
    @apply text-2xl p-1 mb-4 text-center;
    background-color: rgba(var(--accent-light));
    color: rgba(var(--accent-dark));
  }
  li a:hover {
    color: rgba(var(--accent-dark));
  }
</style>
